{"ast":null,"code":"import fetch from 'isomorphic-unfetch';\nimport { take, put, fork } from 'redux-saga/effects';\nimport { LOAD_DATA, loadData } from './actions';\nexport function* loadDataSaga() {\n  const settings = {\n    headers: {\n      Accept: 'application/json'\n    }\n  };\n\n  try {\n    const res = yield fetch('https://www.travel.taipei/open-api/zh-tw/Attractions/All', settings);\n    const data = yield res.json();\n    yield put(loadData(data));\n    console.log(data);\n  } catch (err) {\n    console.log('錯誤'); // yield put(failure(err));\n  }\n}\n\nfunction* rootSaga() {\n  yield all([takeLatest(LOAD_DATA, loadDataSaga)]);\n}\n\nexport default rootSaga; // export function* fetchViewList() {\n//   const settings = {\n//     headers: {\n//         Accept: 'application/json',\n//     }\n//   };\n//     try {\n//       const res = yield fetch('https://www.travel.taipei/open-api/zh-tw/Attractions/All',settings);\n//       const data = yield res.json();\n//       yield put(loadData(data));\n//     } catch (e) {\n//       console.log('錯誤')\n//     }\n// }\n// export default [\n//   fork(fetchViewList)\n// ];","map":{"version":3,"sources":["D:/Dora/travel-blog-next/redux/saga.js"],"names":["fetch","take","put","fork","LOAD_DATA","loadData","loadDataSaga","settings","headers","Accept","res","data","json","console","log","err","rootSaga","all","takeLatest"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,oBAAlB;AACA,SAASC,IAAT,EAAeC,GAAf,EAAoBC,IAApB,QAAgC,oBAAhC;AACA,SAASC,SAAT,EAAqBC,QAArB,QAAqC,WAArC;AAEA,OAAO,UAAWC,YAAX,GAA2B;AAChC,QAAMC,QAAQ,GAAG;AACfC,IAAAA,OAAO,EAAE;AACLC,MAAAA,MAAM,EAAE;AADH;AADM,GAAjB;;AAKA,MAAI;AACF,UAAMC,GAAG,GAAG,MAAMV,KAAK,CAAC,0DAAD,EAA4DO,QAA5D,CAAvB;AACA,UAAMI,IAAI,GAAG,MAAMD,GAAG,CAACE,IAAJ,EAAnB;AACA,UAAMV,GAAG,CAACG,QAAQ,CAACM,IAAD,CAAT,CAAT;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACD,GALD,CAKE,OAAOI,GAAP,EAAY;AACZF,IAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EADY,CAEZ;AACD;AACF;;AAED,UAAWE,QAAX,GAAuB;AACrB,QAAMC,GAAG,CAAC,CACRC,UAAU,CAACd,SAAD,EAAYE,YAAZ,CADF,CAAD,CAAT;AAGD;;AAED,eAAeU,QAAf,C,CAIA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA","sourcesContent":["import fetch from 'isomorphic-unfetch';\r\nimport { take, put, fork } from 'redux-saga/effects';\r\nimport { LOAD_DATA , loadData } from './actions';\r\n\r\nexport function * loadDataSaga () {\r\n  const settings = {\r\n    headers: {\r\n        Accept: 'application/json',\r\n    }\r\n  };\r\n  try {\r\n    const res = yield fetch('https://www.travel.taipei/open-api/zh-tw/Attractions/All',settings);\r\n    const data = yield res.json();\r\n    yield put(loadData(data));\r\n    console.log(data)\r\n  } catch (err) {\r\n    console.log('錯誤')\r\n    // yield put(failure(err));\r\n  }\r\n}\r\n\r\nfunction * rootSaga () {\r\n  yield all([\r\n    takeLatest(LOAD_DATA, loadDataSaga)\r\n  ]);\r\n}\r\n\r\nexport default rootSaga;\r\n\r\n\r\n\r\n// export function* fetchViewList() {\r\n//   const settings = {\r\n//     headers: {\r\n//         Accept: 'application/json',\r\n//     }\r\n//   };\r\n\r\n//     try {\r\n//       const res = yield fetch('https://www.travel.taipei/open-api/zh-tw/Attractions/All',settings);\r\n//       const data = yield res.json();\r\n//       yield put(loadData(data));\r\n//     } catch (e) {\r\n//       console.log('錯誤')\r\n//     }\r\n\r\n// }\r\n\r\n// export default [\r\n//   fork(fetchViewList)\r\n// ];"]},"metadata":{},"sourceType":"module"}