{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(loadDataSaga),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(rootSaga);\n\nimport fetch from 'isomorphic-unfetch';\nimport { take, put, fork } from 'redux-saga/effects';\nimport { LOAD_DATA, loadData } from './actions';\n\nfunction loadDataSaga() {\n  var settings, res, data;\n  return _regeneratorRuntime.wrap(function loadDataSaga$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          settings = {\n            headers: {\n              Accept: 'application/json'\n            }\n          };\n          _context.prev = 1;\n          _context.next = 4;\n          return fetch('https://www.travel.taipei/open-api/zh-tw/Attractions/All', settings);\n\n        case 4:\n          res = _context.sent;\n          _context.next = 7;\n          return res.json();\n\n        case 7:\n          data = _context.sent;\n          _context.next = 10;\n          return put(loadData(data));\n\n        case 10:\n          console.log(data);\n          _context.next = 16;\n          break;\n\n        case 13:\n          _context.prev = 13;\n          _context.t0 = _context[\"catch\"](1);\n          console.log('錯誤'); // yield put(failure(err));\n\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[1, 13]]);\n}\n\nexport default function rootSaga() {\n  return _regeneratorRuntime.wrap(function rootSaga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return all([takeLatest(LOAD_DATA, loadDataSaga)]);\n\n        case 2:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n} // export default function* rootSaga() {\n// \tyield takeLatest('GET_MOVIES_REQUEST', getMoviesSaga);\n// }\n// export default rootSaga;","map":{"version":3,"sources":["D:/Dora/travel-blog-next/redux/saga.js"],"names":["loadDataSaga","rootSaga","fetch","take","put","fork","LOAD_DATA","loadData","settings","headers","Accept","res","json","data","console","log","all","takeLatest"],"mappings":";;;;yBAIUA,Y;;;yBAiBeC,Q;;AArBzB,OAAOC,KAAP,MAAkB,oBAAlB;AACA,SAASC,IAAT,EAAeC,GAAf,EAAoBC,IAApB,QAAgC,oBAAhC;AACA,SAASC,SAAT,EAAqBC,QAArB,QAAqC,WAArC;;AAEA,SAAUP,YAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACQQ,UAAAA,QADR,GACmB;AACfC,YAAAA,OAAO,EAAE;AACLC,cAAAA,MAAM,EAAE;AADH;AADM,WADnB;AAAA;AAAA;AAOgB,iBAAMR,KAAK,CAAC,0DAAD,EAA4DM,QAA5D,CAAX;;AAPhB;AAOUG,UAAAA,GAPV;AAAA;AAQiB,iBAAMA,GAAG,CAACC,IAAJ,EAAN;;AARjB;AAQUC,UAAAA,IARV;AAAA;AASI,iBAAMT,GAAG,CAACG,QAAQ,CAACM,IAAD,CAAT,CAAT;;AATJ;AAUIC,UAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AAVJ;AAAA;;AAAA;AAAA;AAAA;AAYIC,UAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAZJ,CAaI;;AAbJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAiBA,eAAe,SAAUd,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACb,iBAAMe,GAAG,CAAC,CACRC,UAAU,CAACX,SAAD,EAAYN,YAAZ,CADF,CAAD,CAAT;;AADa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,C,CAMf;AACA;AACA;AAEA","sourcesContent":["import fetch from 'isomorphic-unfetch';\r\nimport { take, put, fork } from 'redux-saga/effects';\r\nimport { LOAD_DATA , loadData } from './actions';\r\n\r\nfunction* loadDataSaga () {\r\n  const settings = {\r\n    headers: {\r\n        Accept: 'application/json',\r\n    }\r\n  };\r\n  try {\r\n    const res = yield fetch('https://www.travel.taipei/open-api/zh-tw/Attractions/All',settings);\r\n    const data = yield res.json();\r\n    yield put(loadData(data));\r\n    console.log(data)\r\n  } catch (err) {\r\n    console.log('錯誤')\r\n    // yield put(failure(err));\r\n  }\r\n}\r\n\r\nexport default function* rootSaga () {\r\n  yield all([\r\n    takeLatest(LOAD_DATA, loadDataSaga)\r\n  ]);\r\n}\r\n\r\n// export default function* rootSaga() {\r\n// \tyield takeLatest('GET_MOVIES_REQUEST', getMoviesSaga);\r\n// }\r\n\r\n// export default rootSaga;\r\n\r\n"]},"metadata":{},"sourceType":"module"}