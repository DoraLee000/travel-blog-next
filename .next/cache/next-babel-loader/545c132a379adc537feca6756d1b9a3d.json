{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(loadDataSaga);\n\nimport fetch from 'isomorphic-unfetch';\nimport { take, put, fork } from 'redux-saga/effects';\nimport { LOAD_DATA, loadData } from './actions';\nexport function loadDataSaga() {\n  var settings, res, data;\n  return _regeneratorRuntime.wrap(function loadDataSaga$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return console.log('555');\n\n        case 2:\n          settings = {\n            headers: {\n              Accept: 'application/json'\n            }\n          };\n\n        case 3:\n          if (!true) {\n            _context.next = 22;\n            break;\n          }\n\n          _context.next = 6;\n          return take(LOAD_DATA);\n\n        case 6:\n          _context.prev = 6;\n          _context.next = 9;\n          return fetch('https://www.travel.taipei/open-api/zh-tw/Attractions/All', settings);\n\n        case 9:\n          res = _context.sent;\n          _context.next = 12;\n          return res.json();\n\n        case 12:\n          data = _context.sent;\n          _context.next = 15;\n          return put(loadData(data));\n\n        case 15:\n          _context.next = 20;\n          break;\n\n        case 17:\n          _context.prev = 17;\n          _context.t0 = _context[\"catch\"](6);\n          console.log('錯誤'); //yield put(fetchUserListFail());\n\n        case 20:\n          _context.next = 3;\n          break;\n\n        case 22:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[6, 17]]);\n} // function * rootSaga () {\n//   yield all([\n//     takeLatest(LOAD_DATA, loadDataSaga)\n//   ]);\n// }\n// export default function* rootSaga() {\n// \tyield takeLatest('GET_MOVIES_REQUEST', getMoviesSaga);\n// }\n// export default rootSaga;\n\nexport default [fork(loadDataSaga)];","map":{"version":3,"sources":["D:/Dora/travel-blog-next/redux/saga.js"],"names":["loadDataSaga","fetch","take","put","fork","LOAD_DATA","loadData","console","log","settings","headers","Accept","res","json","data"],"mappings":";;;;yBAIiBA,Y;;AAJjB,OAAOC,KAAP,MAAkB,oBAAlB;AACA,SAASC,IAAT,EAAeC,GAAf,EAAoBC,IAApB,QAAgC,oBAAhC;AACA,SAASC,SAAT,EAAqBC,QAArB,QAAqC,WAArC;AAEA,OAAO,SAAUN,YAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACL,iBAAMO,OAAO,CAACC,GAAR,CAAY,KAAZ,CAAN;;AADK;AAECC,UAAAA,QAFD,GAEY;AACfC,YAAAA,OAAO,EAAE;AACLC,cAAAA,MAAM,EAAE;AADH;AADM,WAFZ;;AAAA;AAAA,eAOE,IAPF;AAAA;AAAA;AAAA;;AAAA;AAQH,iBAAMT,IAAI,CAACG,SAAD,CAAV;;AARG;AAAA;AAAA;AAUW,iBAAMJ,KAAK,CAAC,0DAAD,EAA4DQ,QAA5D,CAAX;;AAVX;AAUKG,UAAAA,GAVL;AAAA;AAWY,iBAAMA,GAAG,CAACC,IAAJ,EAAN;;AAXZ;AAWKC,UAAAA,IAXL;AAAA;AAYD,iBAAMX,GAAG,CAACG,QAAQ,CAACQ,IAAD,CAAT,CAAT;;AAZC;AAAA;AAAA;;AAAA;AAAA;AAAA;AAcDP,UAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAdC,CAeD;;AAfC;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,C,CA6BP;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;;AAEA,eAAe,CACbJ,IAAI,CAACJ,YAAD,CADS,CAAf","sourcesContent":["import fetch from 'isomorphic-unfetch';\r\nimport { take, put, fork } from 'redux-saga/effects';\r\nimport { LOAD_DATA , loadData } from './actions';\r\n\r\nexport function* loadDataSaga () {\r\n  yield console.log('555')\r\n  const settings = {\r\n    headers: {\r\n        Accept: 'application/json',\r\n    }\r\n  }\r\n  while (true) {\r\n    yield take(LOAD_DATA);\r\n    try {\r\n      const res = yield fetch('https://www.travel.taipei/open-api/zh-tw/Attractions/All',settings);\r\n      const data = yield res.json();\r\n      yield put(loadData(data));\r\n    } catch (e) {\r\n      console.log('錯誤')\r\n      //yield put(fetchUserListFail());\r\n    }\r\n  }\r\n  // try {\r\n  //   const res = yield fetch('https://www.travel.taipei/open-api/zh-tw/Attractions/All',settings);\r\n  //   const data = yield res.json();\r\n  //   yield put(loadData(data));\r\n  //   console.log(data)\r\n  // } catch (err) {\r\n  //   console.log('錯誤')\r\n  //   // yield put(failure(err));\r\n  // }\r\n}\r\n\r\n// function * rootSaga () {\r\n//   yield all([\r\n//     takeLatest(LOAD_DATA, loadDataSaga)\r\n//   ]);\r\n// }\r\n\r\n// export default function* rootSaga() {\r\n// \tyield takeLatest('GET_MOVIES_REQUEST', getMoviesSaga);\r\n// }\r\n\r\n// export default rootSaga;\r\n\r\nexport default [\r\n  fork(loadDataSaga)\r\n];\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}